<!DOCTYPE html>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <script type="module">

    import data from './data/pokemon/pokemon.js';
    import { countTypes } from './data.js';
    const pokemonData = data.pokemon;   

    

    // optimizar la carga haciendo un filtrado que solo contenga los tipos
    let type = []; 
    pokemonData.forEach(pokemon =>  
    type.push(pokemon.type) 
    )  
 

    google.charts.load("current", { packages: ['corechart', 'bar']
    });
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
      var data = google.visualization.arrayToDataTable([
        ["Element", "Density", {role: "style" }],

        ["Bug", countTypes(type, 'Bug'), "#e8ffc9"],
        ["Dark", countTypes(type, 'Dark'), "#b3acac"],
        ["Dragon", countTypes(type, 'Dragon'), "#97b3e6"],
        ["Electric", countTypes(type, 'Electric'), "#FCF7DE"],
        ["Fairy", countTypes(type, 'Fairy'), " #fceaff"],
        ["Fighting", countTypes(type, 'Fighting'), "#E6E0D4"],
        ["Fire", countTypes(type, 'Fire'), "#ffbb9e"],
        ["Flying", countTypes(type, 'Flying'), "#d0f2ea"],
        ["Ghost", countTypes(type, 'Ghost'), "#e5c9ff"],
        ["Grass", countTypes(type, 'Grass'), "#c0ffbd"],
        ["Ground", countTypes(type, 'Ground'), "#f4e7da"],
        ["Ice", countTypes(type, 'Ice'), "#e3ffff"],
        ["Normal", countTypes(type, 'Normal'), "#f2d0dd"],
        ["Poison", countTypes(type, 'Poison'), "#e6e6ff"],
        ["Psychic", countTypes(type, 'Psychic'), "#eaeda1"],
        ["Rock", countTypes(type, 'Rock'), "#e3ccc1"],
        ["Steel", countTypes(type, 'Steel'), "#cccccc"],
        ["Water", countTypes(type, 'Water'), "#bffbff"]

      ]);

      var view = new google.visualization.DataView(data);
      view.setColumns([0, 1,
        {
          calc: "stringify",
          sourceColumn: 1,
          type: "string",
          role: "annotation"
        },
        2,
      ]);

      var options = {
        title: " Pokemons by type",
        width: '100%',
        height: 1000,
        bar: {
          groupWidth: "95%"
        },
        legend: {
          position: "none"
        },
      };
      var chart = new google.visualization.ColumnChart(document.getElementById("bar-chart"));
      chart.draw(view, options);
    }
  </script>  
 
  <div id="chart_wrap">
    <div id="bar-chart" ></div>
</div> 